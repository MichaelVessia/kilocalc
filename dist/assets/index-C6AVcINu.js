(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))r(t);new MutationObserver(t=>{for(const o of t)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function n(t){const o={};return t.integrity&&(o.integrity=t.integrity),t.referrerPolicy&&(o.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?o.credentials="include":t.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(t){if(t.ep)return;t.ep=!0;const o=n(t);fetch(t.href,o)}})();const w=l=>l*2.20462262,H=l=>l/2.20462262,b=l=>l.toFixed(2).replace(".00",""),W=(l,a,n)=>{const r=a*2;let t;return n==="up"?t=Math.ceil:n==="down"?t=Math.floor:t=Math.round,t(l/r)*r},k=(l,a,n,r)=>{let t=[];const o=Number(b(n+r*2));let i=(l-o)/2;for(let c=0;c<a.length;c++){let s=a[c],d=s.pairs;for(;s.weight<=i&&d>0;)t.push(s.weight),i-=s.weight,d--}return i>0&&t.push(i.toFixed(3)),t},e={totalWeight:0,unit:"kg",rounding:"nearest",barWeight:20,collarWeight:2.5,useCollars:!0,savedWeights:{kg:{bar:20,collar:2.5},lbs:{bar:45,collar:5.51}},availablePlatesKg:[{weight:50,pairs:0},{weight:25,pairs:8},{weight:20,pairs:1},{weight:15,pairs:1},{weight:10,pairs:1},{weight:5,pairs:1},{weight:2.5,pairs:1},{weight:1.25,pairs:1}],availablePlatesLbs:[{weight:45,pairs:8},{weight:35,pairs:0},{weight:25,pairs:1},{weight:10,pairs:1},{weight:5,pairs:1},{weight:2.5,pairs:1}],plateColors:{}},B="kilocalc-state";function h(){const l={totalWeight:e.totalWeight,unit:e.unit,rounding:e.rounding,useCollars:e.useCollars,savedWeights:e.savedWeights,availablePlatesKg:e.availablePlatesKg,availablePlatesLbs:e.availablePlatesLbs,plateColors:e.plateColors};localStorage.setItem(B,JSON.stringify(l))}function $(){const l=localStorage.getItem(B);if(l)try{const a=JSON.parse(l);e.totalWeight=a.totalWeight||0,e.unit=a.unit||"kg",e.rounding=a.rounding||"nearest",e.useCollars=a.useCollars!==void 0?a.useCollars:!0,a.savedWeights&&(e.savedWeights=a.savedWeights),e.barWeight=e.savedWeights[e.unit].bar,e.collarWeight=e.savedWeights[e.unit].collar,a.availablePlatesKg&&(e.availablePlatesKg=a.availablePlatesKg),a.availablePlatesLbs&&(e.availablePlatesLbs=a.availablePlatesLbs),a.plateColors&&(e.plateColors=a.plateColors)}catch(a){console.error("Failed to load state:",a)}}function v(l){return(l==="kg"?e.availablePlatesKg:e.availablePlatesLbs).filter(n=>n.pairs>0)}function S(l){const a=v(l);return a[a.length-1].weight}function f(l,a){const n=`${l}-${a}`;if(e.plateColors[n])return e.plateColors[n];if(a==="kg")switch(l){case 25:return{plateColor:"red",textColor:"black"};case 20:return{plateColor:"blue",textColor:"white"};case 15:return{plateColor:"yellow",textColor:"black"};case 10:return{plateColor:"green",textColor:"black"};case 5:return{plateColor:"white",textColor:"black"};case 2.5:return{plateColor:"black",textColor:"white"};case 1.25:return{plateColor:"gray",textColor:"black"};default:return{plateColor:"black",textColor:"white"}}return{plateColor:"gray",textColor:"black"}}function K(l,a){const r={15:99,10:88,5:77,2.5:66,1.25:55,1:44,.5:33,.25:22},t={25:110*.9,10:110*.8,5:110*.7,2.5:110*.6,1.25:110*.5,1:110*.4,.5:110*.3,.25:110*.2};return(a==="kg"?r:t)[l]||110}function O(l,a){const n=document.createElement("div");n.className="plate";const r=f(l,a),t=K(l,a);n.style.height=`${t}px`,n.style.backgroundColor=r.plateColor,n.style.color=r.textColor;const o=document.createElement("span");return o.className="plate-text",o.textContent=l,n.appendChild(o),n}function L(l,a,n,r,t,o){const i=document.createElement("div"),c=document.createElement("div");c.className="plate-container";const s=document.createElement("div");if(s.className="bar",s.textContent=t,c.appendChild(s),l.forEach((u,g)=>{if(r.some(p=>p.weight===u)){const p=O(u,n);c.appendChild(p)}}),o>0){const u=document.createElement("div");u.className="collar",u.textContent=o,c.appendChild(u);const g=document.createElement("div");g.className="bar",g.innerHTML="&nbsp;",c.appendChild(g)}i.appendChild(c);const d=l.filter(u=>!r.some(g=>g.weight===u));if(d.length>0){const u=document.createElement("p");u.className="remainder-text",u.textContent=`+ ${d}${n} remainder`,i.appendChild(u)}return i}function m(){const l=document.getElementById("barbells-view");if(l.innerHTML="",e.totalWeight===0)return;const a=document.createElement("div");a.className="barbells-container";const n=e.useCollars?e.collarWeight:0,r=k(e.totalWeight,v(e.unit),e.barWeight,n),t=document.createElement("div");t.className="barbell-col";const o=document.createElement("h2");o.textContent=`${e.totalWeight}${e.unit}`,t.appendChild(o);const i=L(r,e.totalWeight,e.unit,v(e.unit),b(e.barWeight),b(n));t.appendChild(i);const c=e.unit==="kg"?w:H,s=e.unit==="kg"?"lbs":"kg",d=S(s),u=W(c(e.totalWeight),d,e.rounding);let g;s==="lbs"&&e.barWeight===20?g=45:s==="kg"&&e.barWeight===45?g=20:g=c(e.barWeight);let p;e.useCollars?s==="kg"?p=2.5:p=w(2.5):p=0;const I=k(u,v(s),g,p),C=document.createElement("div");C.className="barbell-col";const x=document.createElement("h2");x.textContent=`${b(c(e.totalWeight))}${s}`,C.appendChild(x);const P=L(I,u,s,v(s),b(g),b(p));C.appendChild(P);const E=document.createElement("p");E.className="rounded-text",E.textContent=`Rounded ${e.rounding}: ${W(u,d,e.rounding)}${s}`,C.appendChild(E),a.appendChild(t),a.appendChild(C),l.appendChild(a)}function y(){const l=document.getElementById("plates-kg-container"),a=document.getElementById("plates-lbs-container");l.innerHTML="",a.innerHTML="",e.availablePlatesKg.forEach(n=>{const r=document.createElement("div");r.className="plate-input";const t=document.createElement("label");t.className="plate-label",t.textContent=`${n.weight}kg:`;const o=f(n.weight,"kg"),i=document.createElement("span");i.className="color-indicator",i.style.backgroundColor=o.plateColor,i.style.border=o.plateColor==="white"?"1px solid #ccc":"none",t.insertBefore(i,t.firstChild),t.style.cursor="pointer",t.addEventListener("click",()=>N(n.weight,"kg"));const c=document.createElement("input");c.type="number",c.min="0",c.value=n.pairs,c.addEventListener("input",s=>{const d=Number(s.target.value);isNaN(d)||(n.pairs=d,h(),m())}),r.appendChild(t),r.appendChild(c),l.appendChild(r)}),e.availablePlatesLbs.forEach(n=>{const r=document.createElement("div");r.className="plate-input";const t=document.createElement("label");t.className="plate-label",t.textContent=`${n.weight}lbs:`;const o=f(n.weight,"lbs"),i=document.createElement("span");i.className="color-indicator",i.style.backgroundColor=o.plateColor,i.style.border=o.plateColor==="white"?"1px solid #ccc":"none",t.insertBefore(i,t.firstChild),t.style.cursor="pointer",t.addEventListener("click",()=>N(n.weight,"lbs"));const c=document.createElement("input");c.type="number",c.min="0",c.value=n.pairs,c.addEventListener("input",s=>{const d=Number(s.target.value);isNaN(d)||(n.pairs=d,h(),m())}),r.appendChild(t),r.appendChild(c),a.appendChild(r)})}function N(l,a){const n=`${l}-${a}`;f(l,a);const r=document.createElement("div");r.className="color-picker-modal";const t=document.createElement("div");t.className="color-picker-content";const o=document.createElement("h3");o.textContent=`${l}${a} Plate Color`,t.appendChild(o);const i=[{name:"Red",bg:"red",text:"black"},{name:"Blue",bg:"blue",text:"white"},{name:"Yellow",bg:"yellow",text:"black"},{name:"Green",bg:"green",text:"black"},{name:"White",bg:"white",text:"black"},{name:"Black",bg:"black",text:"white"},{name:"Gray",bg:"gray",text:"black"},{name:"Orange",bg:"orange",text:"black"},{name:"Lime",bg:"#32CD32",text:"black"},{name:"Dark Orange",bg:"#FF8C00",text:"black"}],c=document.createElement("div");c.className="color-grid",i.forEach(d=>{const u=document.createElement("button");u.className="color-option",u.style.backgroundColor=d.bg,u.style.color=d.text,u.textContent=l,d.bg==="white"&&(u.style.border="1px solid #ccc"),u.addEventListener("click",()=>{e.plateColors[n]={plateColor:d.bg,textColor:d.text},h(),m(),y(),document.body.removeChild(r)}),c.appendChild(u)}),t.appendChild(c);const s=document.createElement("button");s.className="color-reset-btn",s.textContent="Reset to Default",s.addEventListener("click",()=>{delete e.plateColors[n],h(),m(),y(),document.body.removeChild(r)}),t.appendChild(s),r.appendChild(t),r.addEventListener("click",d=>{d.target===r&&document.body.removeChild(r)}),document.body.appendChild(r)}function T(){document.getElementById("total-weight-input").addEventListener("input",o=>{e.totalWeight=Number(o.target.value)||0,h(),m()}),document.querySelectorAll(".unit-btn").forEach(o=>{o.addEventListener("click",i=>{const c=e.unit,s=i.target.dataset.unit;e.savedWeights[c]={bar:e.barWeight,collar:e.collarWeight},e.unit=s,e.barWeight=e.savedWeights[s].bar,e.collarWeight=e.savedWeights[s].collar,document.getElementById("bar-weight-input").value=e.barWeight,document.getElementById("collar-weight-input").value=e.collarWeight,document.getElementById("bar-unit-label").textContent=s,document.getElementById("collar-unit-label").textContent=s,document.querySelectorAll(".unit-btn").forEach(d=>d.classList.remove("active")),i.target.classList.add("active"),document.getElementById(`unit-${s}`).checked=!0,h(),m()})}),document.querySelectorAll('input[name="rounding"]').forEach(o=>{o.addEventListener("change",i=>{e.rounding=i.target.value,h(),m()})}),document.getElementById("bar-weight-input").addEventListener("input",o=>{e.barWeight=Number(o.target.value)||0,e.savedWeights[e.unit].bar=e.barWeight,h(),m()}),document.getElementById("collar-weight-input").addEventListener("input",o=>{e.collarWeight=Number(o.target.value)||0,e.savedWeights[e.unit].collar=e.collarWeight,h(),m()}),document.getElementById("use-collars-checkbox").addEventListener("change",o=>{e.useCollars=o.target.checked;const i=document.getElementById("collar-weight-input");e.useCollars?(e.collarWeight=e.savedWeights[e.unit].collar,i.value=e.collarWeight,i.disabled=!1):(i.value=0,i.disabled=!0),h(),m()});const l=document.getElementById("settings-drawer"),a=document.getElementById("drawer-backdrop"),n=document.getElementById("drawer-handle");let r=!1;function t(){r=!r,r?(l.classList.add("open"),a.classList.add("active"),document.body.style.overflow="hidden"):(l.classList.remove("open"),a.classList.remove("active"),document.body.style.overflow="")}n.addEventListener("click",t),a.addEventListener("click",t)}document.addEventListener("DOMContentLoaded",()=>{$(),T(),y(),m();const l=document.getElementById("total-weight-input");l&&(l.value=e.totalWeight||""),document.querySelectorAll(".unit-btn").forEach(n=>{n.classList.toggle("active",n.dataset.unit===e.unit)}),document.getElementById(`unit-${e.unit}`).checked=!0,document.getElementById("bar-weight-input").value=e.barWeight;const a=document.getElementById("collar-weight-input");a.value=e.useCollars?e.collarWeight:0,a.disabled=!e.useCollars,document.getElementById("bar-unit-label").textContent=e.unit,document.getElementById("collar-unit-label").textContent=e.unit,document.getElementById("use-collars-checkbox").checked=e.useCollars,document.querySelector(`input[name="rounding"][value="${e.rounding}"]`).checked=!0});
