(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function n(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerPolicy&&(o.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?o.credentials="include":a.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(a){if(a.ep)return;a.ep=!0;const o=n(a);fetch(a.href,o)}})();const w=l=>l*2.20462262,S=l=>l/2.20462262,C=l=>l.toFixed(2).replace(".00",""),k=(l,t,n)=>{const r=t*2;let a;return n==="up"?a=Math.ceil:n==="down"?a=Math.floor:a=Math.round,a(l/r)*r},L=(l,t,n,r)=>{let a=[];const o=l<n+r*2?0:r,i=Number(C(n+o*2));let c=(l-i)/2;for(let d=0;d<t.length;d++){let s=t[d],u=s.pairs;for(;s.weight<=c&&u>0;)a.push(s.weight),c-=s.weight,u--}return c>0&&a.push(c.toFixed(3)),a},e={totalWeight:100,unit:"kg",rounding:"nearest",barWeight:20,collarWeight:2.5,useCollars:!0,savedWeights:{kg:{bar:20,collar:2.5},lbs:{bar:45,collar:5.51}},availablePlatesKg:[{weight:50,pairs:0},{weight:25,pairs:8},{weight:20,pairs:1},{weight:15,pairs:1},{weight:10,pairs:1},{weight:5,pairs:1},{weight:2.5,pairs:1},{weight:1.25,pairs:1}],availablePlatesLbs:[{weight:45,pairs:8},{weight:35,pairs:0},{weight:25,pairs:1},{weight:10,pairs:1},{weight:5,pairs:1},{weight:2.5,pairs:1}],plateColors:{}},I="kilocalc-state";function p(){const l={totalWeight:e.totalWeight,unit:e.unit,rounding:e.rounding,useCollars:e.useCollars,savedWeights:e.savedWeights,availablePlatesKg:e.availablePlatesKg,availablePlatesLbs:e.availablePlatesLbs,plateColors:e.plateColors};localStorage.setItem(I,JSON.stringify(l))}function K(){const l=localStorage.getItem(I);if(l)try{const t=JSON.parse(l);e.totalWeight=t.totalWeight!==void 0?t.totalWeight:100,e.unit=t.unit||"kg",e.rounding=t.rounding||"nearest",e.useCollars=t.useCollars!==void 0?t.useCollars:!0,t.savedWeights&&(e.savedWeights=t.savedWeights),e.barWeight=e.savedWeights[e.unit].bar,e.collarWeight=e.savedWeights[e.unit].collar,t.availablePlatesKg&&(e.availablePlatesKg=t.availablePlatesKg),t.availablePlatesLbs&&(e.availablePlatesLbs=t.availablePlatesLbs),t.plateColors&&(e.plateColors=t.plateColors)}catch(t){console.error("Failed to load state:",t)}}function f(l){return(l==="kg"?e.availablePlatesKg:e.availablePlatesLbs).filter(n=>n.pairs>0)}function O(l){const t=f(l);return t[t.length-1].weight}function E(l,t){const n=`${l}-${t}`;if(e.plateColors[n])return e.plateColors[n];if(t==="kg")switch(l){case 25:return{plateColor:"red",textColor:"black"};case 20:return{plateColor:"blue",textColor:"white"};case 15:return{plateColor:"yellow",textColor:"black"};case 10:return{plateColor:"green",textColor:"black"};case 5:return{plateColor:"white",textColor:"black"};case 2.5:return{plateColor:"black",textColor:"white"};case 1.25:return{plateColor:"gray",textColor:"black"};default:return{plateColor:"black",textColor:"white"}}return{plateColor:"gray",textColor:"black"}}function T(l,t){const r={15:99,10:88,5:77,2.5:66,1.25:55,1:44,.5:33,.25:22},a={25:110*.9,10:110*.8,5:110*.7,2.5:110*.6,1.25:110*.5,1:110*.4,.5:110*.3,.25:110*.2};return(t==="kg"?r:a)[l]||110}function M(l,t){const n=document.createElement("div");n.className="plate";const r=E(l,t),a=T(l,t);n.style.height=`${a}px`,n.style.backgroundColor=r.plateColor,n.style.color=r.textColor;const o=document.createElement("span");return o.className="plate-text",o.textContent=l,n.appendChild(o),n}function N(l,t,n,r,a,o){const i=document.createElement("div"),c=document.createElement("div");c.className="plate-container";const d=document.createElement("div");if(d.className="bar",d.textContent=a,c.appendChild(d),l.forEach((u,g)=>{if(r.some(h=>h.weight===u)){const h=M(u,n);c.appendChild(h)}}),o>0){const u=document.createElement("div");u.className="collar",u.textContent=o,c.appendChild(u);const g=document.createElement("div");g.className="bar",g.innerHTML="&nbsp;",c.appendChild(g)}i.appendChild(c);const s=l.filter(u=>!r.some(g=>g.weight===u));if(s.length>0){const u=document.createElement("p");u.className="remainder-text",u.textContent=`+ ${s}${n} remainder`,i.appendChild(u)}return i}function m(){const l=document.getElementById("barbells-view");if(l.innerHTML="",e.totalWeight===0)return;const t=document.createElement("div");t.className="barbells-container";const n=e.useCollars?e.collarWeight:0,r=e.totalWeight<e.barWeight+n*2?0:n,a=L(e.totalWeight,f(e.unit),e.barWeight,n),o=document.createElement("div");o.className="barbell-col";const i=document.createElement("h2");i.textContent=`${e.totalWeight}${e.unit}`,o.appendChild(i);const c=N(a,e.totalWeight,e.unit,f(e.unit),C(e.barWeight),C(r));o.appendChild(c);const d=e.unit==="kg"?w:S,s=e.unit==="kg"?"lbs":"kg",u=O(s),g=k(d(e.totalWeight),u,e.rounding);let h;s==="lbs"&&e.barWeight===20?h=45:s==="kg"&&e.barWeight===45?h=20:h=d(e.barWeight);let b;e.useCollars?s==="kg"?b=2.5:b=w(2.5):b=0;const P=g<h+b*2?0:b,H=L(g,f(s),h,b),v=document.createElement("div");v.className="barbell-col";const W=document.createElement("h2");W.textContent=`${C(d(e.totalWeight))}${s}`,v.appendChild(W);const $=N(H,g,s,f(s),C(h),C(P));v.appendChild($);const y=document.createElement("p");y.className="rounded-text",y.textContent=`Rounded ${e.rounding}: ${k(g,u,e.rounding)}${s}`,v.appendChild(y),t.appendChild(o),t.appendChild(v),l.appendChild(t)}function x(){const l=document.getElementById("plates-kg-container"),t=document.getElementById("plates-lbs-container");l.innerHTML="",t.innerHTML="",e.availablePlatesKg.forEach(n=>{const r=document.createElement("div");r.className="plate-input";const a=document.createElement("label");a.className="plate-label",a.textContent=`${n.weight}kg:`;const o=E(n.weight,"kg"),i=document.createElement("span");i.className="color-indicator",i.style.backgroundColor=o.plateColor,i.style.border=o.plateColor==="white"?"1px solid #ccc":"none",a.insertBefore(i,a.firstChild),a.style.cursor="pointer",a.addEventListener("click",()=>B(n.weight,"kg"));const c=document.createElement("input");c.type="number",c.min="0",c.value=n.pairs,c.addEventListener("input",d=>{const s=Number(d.target.value);isNaN(s)||(n.pairs=s,p(),m())}),r.appendChild(a),r.appendChild(c),l.appendChild(r)}),e.availablePlatesLbs.forEach(n=>{const r=document.createElement("div");r.className="plate-input";const a=document.createElement("label");a.className="plate-label",a.textContent=`${n.weight}lbs:`;const o=E(n.weight,"lbs"),i=document.createElement("span");i.className="color-indicator",i.style.backgroundColor=o.plateColor,i.style.border=o.plateColor==="white"?"1px solid #ccc":"none",a.insertBefore(i,a.firstChild),a.style.cursor="pointer",a.addEventListener("click",()=>B(n.weight,"lbs"));const c=document.createElement("input");c.type="number",c.min="0",c.value=n.pairs,c.addEventListener("input",d=>{const s=Number(d.target.value);isNaN(s)||(n.pairs=s,p(),m())}),r.appendChild(a),r.appendChild(c),t.appendChild(r)})}function B(l,t){const n=`${l}-${t}`;E(l,t);const r=document.createElement("div");r.className="color-picker-modal";const a=document.createElement("div");a.className="color-picker-content";const o=document.createElement("h3");o.textContent=`${l}${t} Plate Color`,a.appendChild(o);const i=[{name:"Red",bg:"red",text:"black"},{name:"Blue",bg:"blue",text:"white"},{name:"Yellow",bg:"yellow",text:"black"},{name:"Green",bg:"green",text:"black"},{name:"White",bg:"white",text:"black"},{name:"Black",bg:"black",text:"white"},{name:"Gray",bg:"gray",text:"black"},{name:"Orange",bg:"orange",text:"black"},{name:"Lime",bg:"#32CD32",text:"black"},{name:"Dark Orange",bg:"#FF8C00",text:"black"}],c=document.createElement("div");c.className="color-grid",i.forEach(s=>{const u=document.createElement("button");u.className="color-option",u.style.backgroundColor=s.bg,u.style.color=s.text,u.textContent=l,s.bg==="white"&&(u.style.border="1px solid #ccc"),u.addEventListener("click",()=>{e.plateColors[n]={plateColor:s.bg,textColor:s.text},p(),m(),x(),document.body.removeChild(r)}),c.appendChild(u)}),a.appendChild(c);const d=document.createElement("button");d.className="color-reset-btn",d.textContent="Reset to Default",d.addEventListener("click",()=>{delete e.plateColors[n],p(),m(),x(),document.body.removeChild(r)}),a.appendChild(d),r.appendChild(a),r.addEventListener("click",s=>{s.target===r&&document.body.removeChild(r)}),document.body.appendChild(r)}function A(){document.getElementById("total-weight-input").addEventListener("input",o=>{e.totalWeight=Number(o.target.value)||0,p(),m()}),document.querySelectorAll(".unit-btn").forEach(o=>{o.addEventListener("click",i=>{const c=e.unit,d=i.target.dataset.unit;e.savedWeights[c]={bar:e.barWeight,collar:e.collarWeight},e.unit=d,e.barWeight=e.savedWeights[d].bar,e.collarWeight=e.savedWeights[d].collar,document.getElementById("bar-weight-input").value=e.barWeight,document.getElementById("collar-weight-input").value=e.collarWeight,document.getElementById("bar-unit-label").textContent=d,document.getElementById("collar-unit-label").textContent=d,document.querySelectorAll(".unit-btn").forEach(s=>s.classList.remove("active")),i.target.classList.add("active"),document.getElementById(`unit-${d}`).checked=!0,p(),m()})}),document.querySelectorAll('input[name="rounding"]').forEach(o=>{o.addEventListener("change",i=>{e.rounding=i.target.value,p(),m()})}),document.getElementById("bar-weight-input").addEventListener("input",o=>{e.barWeight=Number(o.target.value)||0,e.savedWeights[e.unit].bar=e.barWeight,p(),m()}),document.getElementById("collar-weight-input").addEventListener("input",o=>{e.collarWeight=Number(o.target.value)||0,e.savedWeights[e.unit].collar=e.collarWeight,p(),m()}),document.getElementById("use-collars-checkbox").addEventListener("change",o=>{e.useCollars=o.target.checked;const i=document.getElementById("collar-weight-input");e.useCollars?(e.collarWeight=e.savedWeights[e.unit].collar,i.value=e.collarWeight,i.disabled=!1):(i.value=0,i.disabled=!0),p(),m()});const l=document.getElementById("settings-drawer"),t=document.getElementById("drawer-backdrop"),n=document.getElementById("drawer-handle");let r=!1;function a(){r=!r,r?(l.classList.add("open"),t.classList.add("active"),document.body.style.overflow="hidden"):(l.classList.remove("open"),t.classList.remove("active"),document.body.style.overflow="")}n.addEventListener("click",a),t.addEventListener("click",a)}document.addEventListener("DOMContentLoaded",()=>{K(),A(),x(),m();const l=document.getElementById("total-weight-input");l&&(l.value=e.totalWeight||""),document.querySelectorAll(".unit-btn").forEach(n=>{n.classList.toggle("active",n.dataset.unit===e.unit)}),document.getElementById(`unit-${e.unit}`).checked=!0,document.getElementById("bar-weight-input").value=e.barWeight;const t=document.getElementById("collar-weight-input");t.value=e.useCollars?e.collarWeight:0,t.disabled=!e.useCollars,document.getElementById("bar-unit-label").textContent=e.unit,document.getElementById("collar-unit-label").textContent=e.unit,document.getElementById("use-collars-checkbox").checked=e.useCollars,document.querySelector(`input[name="rounding"][value="${e.rounding}"]`).checked=!0});
